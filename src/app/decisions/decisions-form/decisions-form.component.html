<!-- decision form -->
@if(pending_task) {
<form
  id="decisionForm"
  #decisionForm="ngForm"
  (ngSubmit)="onSubmit()"
  class="container-form mt-3"
>
  <div class="row mb-3">
    <label for="inputPassword3" class="col-2 col-form-label">Decision:</label>
    <div class="col-8">
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          [disabled]="editMode || !user.write"
          type="radio"
          name="inlineRadioDecisionOptions"
          [(ngModel)]="model.decision"
          id="inlineRadioDecision1"
          [value]="true"
        />
        <label class="form-check-label" for="inlineRadio1">Yes</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          class="form-check-input"
          [disabled]="editMode || !user.write"
          type="radio"
          name="inlineRadioDecisionOptions"
          [(ngModel)]="model.decision"
          id="inlineRadioDecision2"
          [value]="false"
        />
        <label class="form-check-label" for="inlineRadio2">No</label>
      </div>
    </div>
    <div class="d-flex justify-content-end">
      <a
        class="btn-ets-info btn"
        role="button"
        target="_blank"
        style="margin-right: 10px"
        href="https://namastox.upf.edu/handbook/?tab={{
          node_catalogue[pending_task.result.id[0]]
        }}&node={{ pending_task.result.id }}"
      >
        More information
        <i style="font-size: 15px" class="fa-solid fa-circle-info"></i>
      </a>
      <a
        id="infobutton"
        data-bs-toggle="modal"
        (click)="openSupportModal()"
        data-bs-target="#supportModal"
        class="btn btn-ets-info"
        role="button"
        >support</a
      >
    </div>
  </div>
  <div class="row mb-3">
    <label for="inputPassword3" class="col-2 col-form-label"
      >Justification*:</label
    >
    <div class="col-10">
      <textarea
        [disabled]="!user.write"
        required
        [placeholder]="pending_task['task description']['justification']"
        [(ngModel)]="model.justification"
        class="form-control"
        name="justification"
        id="justification"
        rows="4"
      ></textarea>
    </div>
  </div>

  <div class="row mt-2 mb-3">
    <label for="inputPassword3" class="col-2 col-form-label"
      >Documentation:</label
    >
    <div class="col-10">
      <div class="row">
        <div class="col-5">
          <input
            [disabled]="!user.write"
            #DocumentFile
            (change)="sendlink($event)"
            placeholder=""
            type="file"
            class="form-control"
          />
        </div>
        <div class="col-auto d-flex flex-column">
          <div class="d-flex flex-row justify-content-around">
            <input
              [disabled]="!user.write"
              class="form-check-input"
              [disabled]="editMode"
              type="checkbox"
              name="inlineRadioOptions"
              [(ngModel)]="includeDoc"
              id="inlineRadio1"
              [value]="true"
            />
          </div>
          <span class="text-muted sm-text">Include</span>
        </div>
        <div class="col-5">
          <input
            [disabled]="!user.write"
            type="text"
            [(ngModel)]="labelFile"
            name="labelFile"
            placeholder="label"
            class="form-control"
          />
        </div>
        <div class="col-1">
          <a
            role="button"
            class="btn btn-ets-secondary-do border-btn"
            (click)="addDocument()"
            >Save</a
          >
        </div>
      </div>
    </div>
  </div>
  @for (document of documents; track $index) {
  <div class="row mt-2 mb-3">
    <label for="inputPassword3" class="col-2 col-form-label"></label>
    <div class="col-10">
      <div class="row">
        <div class="col-3">
          <input
            [disabled]="!user.write"
            type="text"
            [value]="document.label"
            readonly
            class="form-control-plaintext text-center"
          />
        </div>
        <div class="col-1">
          <div style="text-align: center !important; margin-top: 7px">
            @if(document.include) {
            <i
              style="text-align: center; margin-right: 18px"
              class="fa-solid fa-check-to-slot fa-lg"
            ></i>
            }
          </div>
        </div>
        <div class="col-1">
          <a
            (click)="deleteFile(document.label)"
            class="btn ms-auto"
            role="button"
            ><i
              class="fa-solid fa-circle-minus fa-lg"
              style="color: #e01b24"
            ></i
          ></a>
        </div>
      </div>
    </div>
  </div>
  }

  <div class="row mb-3">
    <label for="inputPassword3" class="col-2 col-form-label">Summary:</label>
    <div class="col-10">
      <textarea
        [disabled]="!user.write"
        [placeholder]="pending_task['task description']['summary']"
        [(ngModel)]="model.summary"
        class="form-control"
        name="summary"
        id="summary"
        rows="4"
      ></textarea>
    </div>
  </div>
  <div class="row">
    <div class="col-10">
      @if (editMode) {
      <button
        [disabled]="!user.write"
        (click)="back()"
        type="submit"
        class="btn btn-ets-delete border-btn"
      >
        Back
      </button>

      }
    </div>
    <div class="col d-flex justify-content-end">
      <button
        [disabled]="decisionForm.invalid || !user.write"
        type="submit"
        class="btn btn-ets-do submit-button border-btn"
      >
        Submit
      </button>
    </div>
  </div>
</form>
<!-- end decision form -->
<!-- modal support information   -->
<app-support-modal-information [pending_task]="pending_task" [upstream_tasks]="upstream_tasks" />
}


